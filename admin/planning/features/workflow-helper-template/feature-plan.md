# Workflow-Helper Template Feature Plan

**Feature:** Project-Specific Workflow Helper Template Generator  
**Status:** 📋 PLANNED  
**Priority:** 🟢 HIGH (Next major feature after v0.2.0)  
**Target Version:** v0.3.0  
**Origin:** Pokehub workflow-helper.sh pattern analysis

---

## 🎯 Vision

Create a template generator that scaffolds customizable `workflow-helper.sh` scripts for any project, pre-wired with dev-toolkit integration and best practices.

## 💡 The Problem

**Current State:**
- Dev-toolkit provides generic utilities (Git Flow, GitHub operations, safety checks)
- Projects need project-specific orchestration (start servers, run tests, custom workflows)
- Developers must write these orchestration scripts from scratch
- No consistent pattern across projects

**Pain Points:**
1. **Boilerplate overhead** - Writing command routing, help text, color output from scratch
2. **Inconsistent patterns** - Each project implements differently
3. **Integration complexity** - Figuring out how to integrate dev-toolkit
4. **Learning curve** - New projects need to discover best practices

## ✨ The Solution

**Provide a template generator:**
```bash
cd my-new-project
dt-init-workflow-helper

# Creates: scripts/workflow-helper.sh
# - Pre-wired with dev-toolkit integration
# - Command routing framework ready
# - Help text system in place
# - Placeholder commands to customize
# - Best practices built-in
```

**Key Insight from Pokehub:**
- ✅ **Framework is reusable** - Command routing, help text, colors, safety integration
- ❌ **Commands are project-specific** - `dev`, `test`, `backend`, `frontend` vary by project
- 🎯 **Solution:** Template provides framework, developer customizes commands

---

## 🏗️ Architecture

### Layered Design
```
┌─────────────────────────────────────┐
│   Developer                         │
│   $ ./scripts/workflow-helper.sh sf │
└──────────────┬──────────────────────┘
               │
               ▼
┌─────────────────────────────────────┐
│   Workflow-Helper.sh (Generated)    │
│   (Project-specific orchestration)  │
│   - Shortcuts (sf, be, fe, etc.)    │
│   - Project commands (test, dev)    │
│   - Custom workflows (status, clean)│
└──────────────┬──────────────────────┘
               │
               ▼
┌─────────────────────────────────────┐
│   Dev-Toolkit                       │
│   (Generic utilities library)       │
│   - gf_* functions                  │
│   - dt-* commands                   │
│   - Git Flow safety                 │
└─────────────────────────────────────┘
```

### Template Structure
```bash
#!/bin/bash
# Generated by dev-toolkit v0.3.0

# ============================================================================
# DEV-TOOLKIT INTEGRATION (Auto-generated - Don't modify)
# ============================================================================
# - Auto-detects dev-toolkit installation
# - Sources utilities
# - Sets up colors and helpers

# ============================================================================
# PROJECT-SPECIFIC CONFIGURATION (Customize this)
# ============================================================================
PROJECT_NAME="MyProject"  # TODO: Change this

# ============================================================================
# COMMAND ROUTING (Customize the commands below)
# ============================================================================
case "$1" in
    # Git Flow shortcuts (pre-wired, work out of the box)
    "start-feature"|"sf") ... ;;
    
    # Project-specific commands (TODO: customize)
    "dev"|"start") 
        # TODO: Add your project's dev server command
        ;;
    
    "test"|"t")
        # TODO: Add your project's test command
        ;;
    
    # Dev-toolkit integration (pre-wired)
    "safety"|"check") dt-git-safety check ;;
    
    # Help text (auto-generated)
    "help"|"h"|"") ... ;;
esac
```

---

## 📋 Implementation Phases

### Phase 1: MVP - Generic Template ✅ Target: v0.3.0
**Goal:** Get a working template generator with basic functionality

**Tasks:**
- [ ] Create `lib/templates/workflow-helper/base.sh` template
- [ ] Create `bin/dt-init-workflow-helper` command
- [ ] Extract reusable patterns from Pokehub's workflow-helper.sh
- [ ] Add TODO markers for customization points
- [ ] Basic documentation in README.md
- [ ] Test template generation in a sample project

**Deliverables:**
- Working `dt-init-workflow-helper` command
- Generic template with clear customization points
- Updated README with template feature
- Basic usage guide

**Success Criteria:**
- [ ] Command creates executable workflow-helper.sh
- [ ] Generated script has all framework code
- [ ] Git Flow shortcuts work out of the box
- [ ] Clear TODO markers guide customization
- [ ] Help text is comprehensive

**Effort:** ~1-2 days  
**Risk:** LOW (optional feature, doesn't affect core)

---

### Phase 2: Polish & Documentation ✅ Target: v0.3.0
**Goal:** Make template production-ready with excellent docs

**Tasks:**
- [ ] Add `--name` flag for project name
- [ ] Add `--output` flag for custom path
- [ ] Improve help text in generated file
- [ ] Create comprehensive guide: `docs/WORKFLOW-HELPER-GUIDE.md`
- [ ] Add examples for common use cases
- [ ] Add to QUICK-START.md
- [ ] Update CONTRIBUTING.md with template patterns

**Deliverables:**
- Command-line options for customization
- Comprehensive documentation
- Usage examples
- Best practices guide

**Success Criteria:**
- [ ] `--help` shows clear usage
- [ ] `--name` customizes project name
- [ ] `--output` allows custom path
- [ ] Documentation covers common scenarios
- [ ] Examples for 3+ project types

**Effort:** ~0.5-1 day  
**Risk:** LOW

---

### Phase 3: Stack-Specific Templates 🔮 Target: v0.4.0
**Goal:** Provide pre-configured templates for common stacks

**Tasks:**
- [ ] Create `lib/templates/workflow-helper/python-react.sh`
- [ ] Create `lib/templates/workflow-helper/node-fullstack.sh`
- [ ] Create `lib/templates/workflow-helper/go-react.sh`
- [ ] Add `--stack` flag to select template
- [ ] Document each stack template
- [ ] Create template contribution guide

**Deliverables:**
- 3+ stack-specific templates
- `--stack` option for template selection
- Template gallery in documentation
- Community contribution guidelines

**Success Criteria:**
- [ ] `--stack python-react` generates Python+React template
- [ ] Each template has sensible defaults
- [ ] Documentation shows all available stacks
- [ ] Clear guide for contributing new templates

**Effort:** ~1-2 days  
**Risk:** LOW (additive, doesn't change core)

---

### Phase 4: Interactive Mode 🔮 Target: v0.5.0
**Goal:** Wizard-style template generation

**Tasks:**
- [ ] Add `--interactive` flag
- [ ] Prompt for project name
- [ ] Prompt for stack selection
- [ ] Prompt for which commands to include
- [ ] Generate customized template based on answers
- [ ] Add validation and error handling

**Deliverables:**
- Interactive wizard mode
- Smart defaults based on project detection
- User-friendly prompts
- Validation and error messages

**Success Criteria:**
- [ ] `dt-init-workflow-helper --interactive` starts wizard
- [ ] Wizard asks relevant questions
- [ ] Generated template matches user selections
- [ ] Graceful handling of invalid inputs

**Effort:** ~1-2 days  
**Risk:** MEDIUM (more complex UX)

---

## 🎯 Benefits

### For New Projects
- ✅ **Fast setup** - One command to scaffold
- ✅ **Consistent pattern** - Same structure across projects
- ✅ **Best practices** - Built into template
- ✅ **Easy customization** - Clear TODO markers

### For Dev-Toolkit
- ✅ **Increased adoption** - Lower barrier to entry
- ✅ **Showcase features** - Demonstrates integration
- ✅ **Standardization** - Consistent patterns across projects
- ✅ **Documentation** - Living example of best practices

### For Developers
- ✅ **Quick onboarding** - One script to learn
- ✅ **Familiar commands** - Same shortcuts everywhere
- ✅ **Less boilerplate** - No need to write from scratch
- ✅ **Customizable** - Adapt to project needs

---

## 📊 Success Metrics

### Adoption
- Number of projects using the template
- GitHub stars/forks
- Community contributions (new stack templates)

### Value
- Time saved vs writing from scratch (~2-4 hours per project)
- Consistency across projects (same command structure)
- Developer satisfaction (feedback, issues, PRs)

### Quality
- Template generation success rate
- Customization ease (time to customize)
- Bug reports (should be minimal)

---

## 🔧 Technical Details

### Template Location
```
lib/templates/workflow-helper/
├── base.sh              # Generic template (Phase 1)
├── python-react.sh      # Python + React stack (Phase 3)
├── node-fullstack.sh    # Node.js full-stack (Phase 3)
└── go-react.sh          # Go + React stack (Phase 3)
```

### Command Location
```
bin/dt-init-workflow-helper
```

### Generated File Location
```
scripts/workflow-helper.sh  # Default
# Or custom via --output flag
```

### Template Variables
Simple placeholder replacement:
```bash
# In template:
PROJECT_NAME="{{PROJECT_NAME}}"
TOOLKIT_ROOT="{{TOOLKIT_ROOT}}"

# Replace with:
sed "s/{{PROJECT_NAME}}/$project_name/g"
sed "s|{{TOOLKIT_ROOT}}|$toolkit_root|g"
```

---

## 🚧 Implementation Notes

### Phase 1 Focus
**Keep it simple:**
- One generic template
- Basic command (no flags)
- Minimal documentation
- Get feedback early

**Don't over-engineer:**
- No complex variable substitution
- No interactive mode yet
- No stack-specific templates yet
- Focus on core value

### Testing Strategy
1. **Unit tests** - Test template variable replacement
2. **Integration tests** - Test command creates valid file
3. **Manual testing** - Use in real projects (Pokehub, others)
4. **Validation** - Generated script passes shellcheck

### Documentation Strategy
1. **README.md** - Brief overview and quick example
2. **QUICK-START.md** - Add to "Next Steps"
3. **WORKFLOW-HELPER-GUIDE.md** - Comprehensive guide (Phase 2)
4. **Examples** - Show 3+ common project types

---

## 🎨 Template Features

### Pre-Wired (Works out of the box)
- ✅ Dev-toolkit detection and sourcing
- ✅ Color output system
- ✅ Git Flow shortcuts (sf, fix, pr, etc.)
- ✅ Safety check integration
- ✅ Help text system
- ✅ Error handling

### Customizable (TODO markers)
- 📝 Project name
- 📝 Development server commands
- 📝 Test commands
- 📝 Build commands
- 📝 Custom workflows
- 📝 Project-specific shortcuts

---

## 📚 Related Documents

### Analysis & Design
- [Workflow-Helper Analysis](../../notes/opportunities/external/workflow-helper-analysis.md)
- [Workflow-Helper Template Idea](../../notes/opportunities/external/workflow-helper-template-idea.md)

### Implementation
- [Phase 1: MVP](phase-1.md) - Generic template
- [Phase 2: Polish](phase-2.md) - Documentation & options (future)
- [Phase 3: Stack Templates](phase-3.md) - Stack-specific templates (future)

### Reference
- [Pokehub workflow-helper.sh](https://github.com/grimm00/pokehub/blob/main/scripts/workflow-helper.sh) - Original inspiration
- [Dev-Toolkit Roadmap](../../roadmap.md)

---

## 🎯 Decision Points

### 1. Core vs Optional Feature?
**Decision:** CORE - This is a natural extension of dev-toolkit

**Rationale:**
- Lightweight (just template files)
- High value (demonstrates integration)
- Natural fit with toolkit philosophy
- Increases adoption

### 2. One Template vs Multiple?
**Decision:** Start with ONE (Phase 1), add more later (Phase 3)

**Rationale:**
- Simpler to implement and maintain
- Get feedback early
- Can add stack-specific templates based on demand
- Let usage patterns guide which stacks to prioritize

### 3. Interactive vs Manual?
**Decision:** Start MANUAL (Phase 1), add interactive later (Phase 4)

**Rationale:**
- Simpler implementation
- More flexible for advanced users
- Can add wizard mode based on feedback
- Manual editing is fine for MVP

### 4. Update Strategy?
**Decision:** Manual for now, consider update command later

**Rationale:**
- Generated file is meant to be customized
- Hard to merge updates with customizations
- Version in template for reference
- Can add `dt-update-workflow-helper` if needed

---

## 🚀 Getting Started (After Approval)

### Step 1: Create Feature Branch
```bash
git checkout develop
git pull origin develop
git checkout -b feat/workflow-helper-template
```

### Step 2: Implement Phase 1
1. Create template file
2. Create generator command
3. Add basic tests
4. Update README

### Step 3: Test in Real Project
```bash
cd ~/Projects/test-project
dt-init-workflow-helper
# Customize and use
```

### Step 4: Documentation
- Add to README
- Create usage examples
- Document customization points

### Step 5: Release
- Merge to develop
- Test thoroughly
- Release as v0.3.0

---

## 📈 Timeline

### v0.3.0 - Workflow Helper Template
**Target:** ~1 week after v0.2.0 release

**Phases:**
- Phase 1: MVP (1-2 days)
- Phase 2: Polish (0.5-1 day)
- Testing & Documentation (0.5-1 day)
- **Total:** ~2-4 days

### v0.4.0 - Stack Templates (Optional)
**Target:** Based on demand

**Phases:**
- Phase 3: Stack-specific templates (1-2 days)
- Community template gallery
- Contribution guidelines

### v0.5.0 - Interactive Mode (Optional)
**Target:** Based on feedback

**Phases:**
- Phase 4: Interactive wizard (1-2 days)
- Enhanced UX
- Smart defaults

---

## 💬 Open Questions

1. **Should we auto-detect project type?**
   - Pros: Better defaults, less customization needed
   - Cons: More complex, might guess wrong
   - **Decision:** Not for Phase 1, consider for Phase 4

2. **Should we support template updates?**
   - Pros: Users get improvements
   - Cons: Hard to merge with customizations
   - **Decision:** Not for Phase 1, document manual process

3. **Should templates be plugins/extensions?**
   - Pros: Community can add without PRs
   - Cons: More complex architecture
   - **Decision:** Not for Phase 1, keep simple

4. **Should we validate generated scripts?**
   - Pros: Catch errors early
   - Cons: Adds complexity
   - **Decision:** Yes, run shellcheck on generated file

---

## 🎯 Current Status

**Status:** 📋 PLANNED  
**Priority:** 🟢 HIGH (Next after v0.2.0)  
**Effort:** 🟡 MEDIUM (2-4 days for Phase 1-2)  
**Risk:** 🟢 LOW (optional feature, doesn't affect core)

**Next Steps:**
1. ✅ Create feature plan (this document)
2. ✅ Add to roadmap
3. ⏳ Create Phase 1 implementation plan
4. ⏳ Get approval to proceed
5. ⏳ Create feature branch
6. ⏳ Implement Phase 1

---

**Created:** October 6, 2025  
**Last Updated:** October 6, 2025  
**Status:** Ready for implementation  
**Target Version:** v0.3.0
