---
alwaysApply: true
---

# Dev-Toolkit - Cursor AI Rules

**Purpose:** Guide AI assistance to align with dev-toolkit best practices and workflows  
**Identity:** ğŸ”§ Portable CLI Toolkit  
**Last Updated:** 2026-01-09  
**Status:** âœ… Active

---

## ğŸ“‹ Quick Links

### Rules Files

- **[Workflow Rules](workflow.mdc)** - Git Flow, PR workflow, development processes
- **[Script Standards](script-standards.mdc)** - Bash script quality and testing

---

## ğŸ¯ Project Overview

Dev-toolkit is a portable, project-agnostic development toolkit that provides:

- **Sourcery Integration** - Parse and extract Sourcery code reviews
- **Git Flow Safety** - Automated branch and commit safety checks
- **GitHub Integration** - CLI utilities for GitHub operations
- **Pre-commit Hooks** - Automated quality gates

### Key Principles

- **Portability** - Works in any project without modification
- **Auto-Detection** - Intelligently discovers project context
- **Modularity** - Use individual tools or the full suite
- **Zero Dependencies** - Core features work with minimal requirements
- **AI-Friendly** - Designed for seamless AI assistant integration

---

## ğŸ”§ Project Identity: Portable CLI Toolkit

**Dev-toolkit's primary identity is "portable CLI toolkit."**

### What This Means

1. **Tools are products** - Each `dt-*` command is a standalone utility
2. **Portability is paramount** - Must work across any Git repository
3. **Auto-detection over configuration** - Minimize user setup
4. **Bash for maximum compatibility** - No exotic dependencies

### Work Categories

When planning work, classify it:

| Category | Where It Goes | Example |
|----------|---------------|---------|
| ğŸ¯ **New Command** | `admin/planning/features/` | `dt-review` |
| ğŸ”§ **Enhancement** | `admin/explorations/` â†’ features | Deduplication |
| ğŸ› **Bug Fix** | Direct fix or `admin/feedback/` | Script errors |
| ğŸ“š **Documentation** | `docs/` or `admin/docs/` | Guides |

---

## ğŸ“ Documentation Standards

### Hub-and-Spoke Pattern

**ALWAYS follow this pattern when creating or updating documentation:**

1. **Hub Files (README.md)**
   - Serve as navigation entry points
   - Include "ğŸ“‹ Quick Links" section at the top
   - Provide overview of the directory/feature
   - Link to spoke documents
   - Include status indicators and last updated date

2. **Spoke Documents**
   - Focus on single topics or phases
   - Link back to hub files
   - Use descriptive filenames (e.g., `feature-plan.md`, `phase-1.md`)
   - Include status and date metadata

3. **Progressive Disclosure**
   - Start with high-level overview
   - Provide links to detailed documents
   - Use clear section hierarchy
   - Avoid overwhelming users with too much detail in hub files

### Status Indicators

Use these **consistently** across all documentation:

- ğŸ”´ **Not Started / Exploration** - Initial exploration or planning
- ğŸŸ¡ **Planned / Research** - Approved but not yet begun
- ğŸŸ  **In Progress** - Active development
- âœ… **Active/Complete** - Operational or finished

### Date Format

Always use: `YYYY-MM-DD` format (e.g., 2026-01-09)

### File Naming Conventions

- Use **kebab-case** for file names: `feature-plan.md`, `status-and-next-steps.md`
- Use **descriptive names**: `phase-1-foundation.md` not `p1.md`
- README.md files are always **UPPERCASE**

---

## ğŸ—ï¸ Project Structure

### Directory Organization

**Respect this structure when creating files:**

```
dev-toolkit/
â”œâ”€â”€ bin/                    # Executable commands (dt-*)
â”‚   â”œâ”€â”€ dt-review           # Quick Sourcery review extraction
â”‚   â”œâ”€â”€ dt-sourcery-parse   # Full Sourcery parser
â”‚   â”œâ”€â”€ dt-git-safety       # Git Flow safety checks
â”‚   â”œâ”€â”€ dt-config           # Configuration management
â”‚   â””â”€â”€ dt-install-hooks    # Pre-commit hook installer
â”œâ”€â”€ lib/                    # Core libraries
â”‚   â”œâ”€â”€ core/               # Shared utilities
â”‚   â”‚   â””â”€â”€ github-utils.sh # GitHub CLI operations
â”‚   â”œâ”€â”€ sourcery/           # Sourcery-related
â”‚   â”‚   â””â”€â”€ parser.sh       # Review parser
â”‚   â””â”€â”€ git-flow/           # Git workflow
â”‚       â”œâ”€â”€ safety.sh       # Safety checks
â”‚       â””â”€â”€ utils.sh        # Git utilities
â”œâ”€â”€ config/                 # Configuration templates
â”œâ”€â”€ docs/                   # User documentation
â”œâ”€â”€ tests/                  # Test suite (bats-core)
â”‚   â”œâ”€â”€ unit/               # Unit tests
â”‚   â”œâ”€â”€ integration/        # Integration tests
â”‚   â””â”€â”€ helpers/            # Test utilities
â”œâ”€â”€ scripts/                # Development scripts
â”œâ”€â”€ admin/                  # Project management
â”‚   â”œâ”€â”€ explorations/       # Active explorations
â”‚   â”œâ”€â”€ planning/           # Features, releases
â”‚   â”‚   â”œâ”€â”€ features/       # Feature development
â”‚   â”‚   â”œâ”€â”€ releases/       # Version management
â”‚   â”‚   â””â”€â”€ roadmap.md      # Project roadmap
â”‚   â”œâ”€â”€ feedback/           # Code reviews
â”‚   â””â”€â”€ chat-logs/          # AI session history
â””â”€â”€ .cursor/                # Cursor IDE configuration
    â”œâ”€â”€ commands/           # Workflow automation
    â””â”€â”€ rules/              # AI assistant rules
```

### File Location Rules

1. **Commands** â†’ `bin/dt-*`
2. **Libraries** â†’ `lib/[category]/`
3. **Feature Planning** â†’ `admin/planning/features/[feature-name]/`
4. **Explorations** â†’ `admin/explorations/[topic]/`
5. **Release Management** â†’ `admin/planning/releases/vX.Y.Z/`
6. **User Documentation** â†’ `docs/`
7. **Tests** â†’ `tests/[unit|integration]/`
8. **Cursor Commands** â†’ `.cursor/commands/`

---

## ğŸ¤– AI Assistant Guidelines

### When Suggesting Changes

1. **Respect existing patterns** - Don't introduce new organizational patterns
2. **Update documentation** - When creating features, update relevant hub files
3. **Maintain consistency** - Use established status indicators and date formats
4. **Test before committing** - All script changes MUST be tested
5. **Link bidirectionally** - Hub â†’ Spoke and Spoke â†’ Hub

### When Creating New Features

1. Start with exploration (`/explore`) for new ideas
2. Conduct research (`/research`) to investigate options
3. Make decisions (`/decision`) with ADRs if significant
4. Plan implementation with feature-plan.md
5. Implement with tests (TDD preferred)

### When Making Script Changes

1. Check if documentation needs updating
2. **TEST ALL CHANGES** before committing
3. Verify portability across different repositories
4. Update relevant README files
5. Consider backward compatibility

### Response Style

- Be clear and actionable
- Provide rationale for suggestions
- Reference project patterns
- Offer to implement rather than just suggest
- Ask clarifying questions when scope is unclear

---

## ğŸ“ Testing Requirements

### CRITICAL: NEVER COMMIT WITHOUT TESTING

- **MANDATORY**: Test ALL script changes before committing
- **MANDATORY**: Verify scripts work in different project contexts
- **MANDATORY**: Check for portability issues (hardcoded paths, project names)
- **MANDATORY**: Test the specific scenario the user reported
- **NEVER**: Commit changes with hardcoded project-specific values
- **ALWAYS**: Ask user to test across multiple projects if unsure

### Testing Commands

```bash
# Test script syntax
bash -n script.sh

# Run unit tests
bats tests/unit/

# Run integration tests
bats tests/integration/

# Run all tests
./scripts/test.sh

# Test in other project
cd ~/Projects/other && ~/.dev-toolkit/bin/dt-review 123
```

---

## ğŸš§ Current Project State

**Version:** v0.4.0  
**Stage:** Feature Development  
**Updated:** 2026-01-28

### âœ… Completed

**Core Commands:**
- âœ… `dt-review` - Quick Sourcery review extraction
- âœ… `dt-sourcery-parse` - Full parser with options
- âœ… `dt-git-safety` - Git Flow safety checks
- âœ… `dt-config` - Configuration management
- âœ… `dt-workflow` - Unified workflow orchestration (v0.4.0)
- âœ… `dt-doc-gen` - Document generation from templates (v0.4.0)
- âœ… `dt-doc-validate` - Document validation (v0.4.0)
- âœ… `dt-install-hooks` - Pre-commit hook installer
- âœ… `dt-setup-sourcery` - Interactive Sourcery setup

**Infrastructure:**
- âœ… Installation system (install.sh, dev-setup.sh)
- âœ… Pre-commit hooks with safety checks
- âœ… GitHub Actions CI/CD pipeline
- âœ… Test suite (215 tests, <15 seconds)
- âœ… Comprehensive documentation

### ğŸ”´ Active Explorations

- ğŸ”´ **dt-review Deduplication** - Handling duplicate Sourcery comments

### ğŸŸ¡ Planned

- ğŸŸ¡ **v0.3.0: Workflow Helper Template** - Project workflow generator
- ğŸŸ¡ **v0.4.0: Batch Operations** - Multiple PR processing

---

## ğŸ“ Maintenance

### Updating These Rules

**Update this file when:**

- New patterns are established
- Project structure changes
- Workflow processes change
- New commands are added
- Best practices evolve

**Update Process:**

1. Make changes to appropriate rule file
2. Commit with message: `docs(cursor-rules): [description]`
3. Push to develop branch (docs/* can push directly)

**Split Files:**

- **Workflow changes:** Update [workflow.mdc](workflow.mdc)
- **Script standards:** Update [script-standards.mdc](script-standards.mdc)

---

**Last Updated:** 2026-01-09  
**Status:** âœ… Active  
**Next:** dt-review deduplication exploration
